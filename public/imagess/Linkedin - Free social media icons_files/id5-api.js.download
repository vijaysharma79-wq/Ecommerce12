/**
 * @id5io/id5-api.js
 * @version v1.0.34
 * @link https://id5.io/
 * @license Apache-2.0
 */
!function(n){var r={};function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=n,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=8)}([function(t,e,n){"use strict";function s(){return(s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}e.b=function(t,e){var n=!0;return k(t,function(t){return n=n&&e(t)}),n},e.u=y,e.v=function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];m(console.warn,t,"WARNING",n)},e.t=g,e.y=function(t){b=!!t},e.o=O,e.p=function(){return p},e.i=S,e.n=j,e.s=w,e.j=_,e.q=function(t){return S(t,a)},e.r=function(t){return S(t,c)},e.k=function(t){return S(t,f)},e.l=function(t){return void 0!==t},e.m=C,e.h=function(t){t=window.document.cookie.match("(^|;)\\s*"+t+"\\s*=\\s*([^;]*)\\s*(;|$)");return t?decodeURIComponent(t[2]):null},e.x=function(t,e,n){document.cookie="".concat(t,"=").concat(encodeURIComponent(e)).concat(""!==n?"; expires=".concat(n):"","; path=/")},e.a=function(t,e,n){var r,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};try{var o=i.method||(n?"POST":"GET");document.createElement("a").href=t;var a,c="object"===u(e)&&null!==e?e:{success:function(){y("ajax","xhr success")},error:function(t){g("ajax","xhr error",null,t)}};"function"==typeof e&&(c.success=e),(r=new window.XMLHttpRequest).onreadystatechange=function(){var t;r.readyState===T&&(200<=(t=r.status)&&t<300||304===t?c.success(r.responseText,r):c.error(r.statusText,r))},r.ontimeout=function(){g("ajax","xhr timeout after ",r.timeout,"ms")},"GET"===o&&n&&(s((a=function(t,e){var n=document.createElement("a");e&&"noDecodeWholeURL"in e&&e.noDecodeWholeURL?n.href=t:n.href=decodeURIComponent(t);e=e&&"decodeSearchAsString"in e&&e.decodeSearchAsString;return{href:n.href,protocol:(n.protocol||"").replace(/:$/,""),hostname:n.hostname,port:+n.port,pathname:n.pathname.replace(/^(?!\/)/,"/"),search:e?n.search:function(t){return t?t.replace(/^\?/,"").split("&").reduce(function(t,e){var n=e.split("="),n=(e=2,function(t){if(Array.isArray(t))return t}(n=n)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,c=[],s=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,i=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return c}}(n,e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),e=n[0],n=n[1];return/\[\]$/.test(e)?(t[e=e.replace("[]","")]=t[e]||[],t[e].push(n)):t[e]=n||"",t},{}):{}}(n.search||""),hash:(n.hash||"").replace(/^#/,""),host:n.host||window.location.host}}(t,i)).search,n),t=function(t){return(t.protocol||"http")+"://"+(t.host||t.hostname+(t.port?":".concat(t.port):""))+(t.pathname||"")+(t.search?"?".concat(function(t){return Object.keys(t).map(function(e){return Array.isArray(t[e])?t[e].map(function(t){return"".concat(e,"[]=").concat(t)}).join("&"):"".concat(e,"=").concat(t[e])}).join("&")}(t.search||"")):"")+(t.hash?"#".concat(t.hash):"")}(a)),r.open(o,t,!0),i.withCredentials&&(r.withCredentials=!0),k(i.customHeaders,function(t,e){r.setRequestHeader(e,t)}),i.preflight&&r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Content-Type",i.contentType||"text/plain"),"POST"===o&&n?r.send(n):r.send()}catch(t){g("ajax","xhr construction",t)}},e.e=function(t,e,n){"loading"!==document.readyState?D(t,e,n):document.addEventListener("DOMContentLoaded",function(){D(t,e,n)})},e.c=function(t){for(var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=function(t,e){if(j(Math.imul))return Math.imul(t,e);var n=(4194303&t)*(e|=0);return 4290772992&t&&(n+=(4290772992&t)*e|0),0|n},i=3735928559^n,o=1103547991^n,a=0;a<t.length;a++)e=t.charCodeAt(a),i=r(i^e,2654435761),o=r(o^e,1597334677);return i=r(i^i>>>16,2246822507)^r(o^o>>>13,3266489909),(4294967296*(2097151&(o=r(o^o>>>16,2246822507)^r(i^i>>>13,3266489909)))+(i>>>0)).toString()},e.g=function(t){var e=/[()-.:;=?_/]/g;_(t.brands)&&(t.brands=P(t.brands,function(t){return w(t.brand)&&t.brand.search(e)<0}));_(t.fullVersionList)&&(t.fullVersionList=P(t.fullVersionList,function(t){return w(t.brand)&&t.brand.search(e)<0}));return t},e.f=function(t,e,n,r,i){for(e=e.split?e.split("."):e,r=0;r<e.length;r++)t=t?t[e[r]]:i;return t===i?n:t},e.w=function(t){var e=Object.keys(t),n=e.length,r=new Array(n);for(;n--;)r[n]=[e[n],t[e[n]]];return r},e.d=function t(e,n){var r=E(e)&&E(n);if(!r)return e===n;var i=Object.keys(e);r=Object.keys(n);if(i.length!==r.length)return!1;for(var o=0,a=i;o<a.length;o++){var c=a[o];if(!t(e[c],n[c]))return!1}return!0};var r="Array",i="String",o="Function",a="Number",c="Object",f="Boolean",d=Object.prototype.toString,h="TRUE"===I("id5_debug").toUpperCase(),p="TRACE"===I("id5_debug").toUpperCase(),v=Boolean(window.console),b=!1;function y(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];m(console.info,t,"INFO",n)}function g(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];m(console.error,t,"ERROR",n)}function m(t,e,n,r){O()&&v&&t&&t.apply(console,["%cID5 - #".concat(e),"color: #fff; background: #1c307e; padding: 1px 4px; border-radius: 3px;",n].concat(r))}function O(){return h||p||b}function I(t){t=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(window.location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}function S(t,e){return d.call(t)==="[object "+e+"]"}function j(t){return S(t,o)}function w(t){return S(t,i)}function _(t){return S(t,r)}function C(t){if(!t)return!0;if(_(t)||w(t))return!(0<t.length);for(var e in t)if(hasOwnProperty.call(t,e))return!1;return!0}function k(t,e){if(!C(t)){if(j(t.forEach))return t.forEach(e,this);var n=0,r=t.length;if(0<r)for(;n<r;n++)e(t[n],n,t);else for(n in t)hasOwnProperty.call(t,n)&&e.call(this,t[n],n)}}var T=4;function D(t,e,n){var r=new Image;r.src=t,j(e)&&e(),j(n)&&(r.complete?n():r.addEventListener("load",n))}function P(t,e){var n=[];return k(t,function(t){e(t)&&n.push(t)}),n}var E=function(t){return null!=t&&"object"===u(t)}},function(t,e){t.exports={STORAGE_CONFIG:{ID5:{name:"id5id",expiresDays:90},LAST:{name:"id5id_last",expiresDays:90},CONSENT_DATA:{name:"id5id_cached_consent_data",expiresDays:30},PD:{name:"id5id_cached_pd",expiresDays:30},SEGMENTS:{name:"id5id_cached_segments",expiresDays:30},PRIVACY:{name:"id5id_privacy",expiresDays:30},LIVE_INTENT:{name:"id5li",expiresDays:90}},LEGACY_COOKIE_NAMES:["id5.1st","id5id.1st"],PRIVACY:{JURISDICTIONS:{gdpr:!0,ccpa:!1,lgpd:!0,other:!1}},ID5_EIDS_SOURCE:"id5-sync.com",LIVE_INTENT_POLL_INTERVAL_MS:500}},function(t,e,n){"use strict";n.d(e,"a",function(){return m}),n.d(e,"b",function(){return O});var f=n(0),r=n(12),e=n(1),i=n.n(e),o=(n(3),["localStoragePurposeConsent","ccpaString"]);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(){return(c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function s(t,e){if(null==t)return{};var n,r=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],0<=e.indexOf(n)||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(t),o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n]);return r}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p(r.key),r)}}function d(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t,e,n){return(e=p(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t){t=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);e=n.call(t,e||"default");if("object"!==a(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===a(t)?t:String(t)}var v={tcfv1:{objName:"__cmpCall",objKeys:["command","parameter"],returnObjName:"__cmpReturn"},tcfv2:{objName:"__tcfapiCall",objKeys:["command","version"],returnObjName:"__tcfapiReturn"},uspv1:{objName:"__uspapiCall",objKeys:["command","version"],returnObjName:"__uspapiReturn"}},b=Object.freeze({NONE:"none",TCF_V1:"TCFv1",TCF_V2:"TCFv2",USP_V1:"USPv1",ID5_ALLOWED_VENDORS:"ID5"}),y=Object.freeze({FORCE_ALLOWED_BY_CONFIG:"force_allowed_by_config",ID5_CONSENT:"id5_consent",PROVISIONAL:"provisional",JURISDICTION:"jurisdiction",CONSENT_API:"consent_api"}),g=function(){function r(t,e,n){u(this,r),h(this,"allowed",!1),h(this,"grantType",y.NONE),h(this,"api",b.NONE),this.allowed=t,this.grantType=e,this.api=n}return d(r,[{key:"isDefinitivelyAllowed",value:function(){return this.allowed&&this.grantType!==y.PROVISIONAL}}]),r}(),m=function(){function t(){u(this,t),h(this,"api",b.NONE),h(this,"consentString",void 0),h(this,"gdprApplies",!1),h(this,"localStoragePurposeConsent",void 0),h(this,"allowedVendors",void 0),h(this,"hasCcpaString",!1),h(this,"ccpaString","")}return d(t,[{key:"localStorageGrant",value:function(){return new g(this.isGranted(),y.CONSENT_API,this.api)}},{key:"isGranted",value:function(){switch(this.api){case b.NONE:return!0;case b.TCF_V1:return!this.gdprApplies||!0===this.localStoragePurposeConsent;case b.TCF_V2:return!1===this.gdprApplies||!0===this.localStoragePurposeConsent;case b.ID5_ALLOWED_VENDORS:return this.allowedVendors.includes("131");case b.USP_V1:return!0}}},{key:"hashCode",value:function(){this.localStoragePurposeConsent,this.ccpaString;var t=s(this,o);return Object(f.c)(JSON.stringify(t))}}]),t}(),O=function(){function l(t,e,n){u(this,l),h(this,"invocationId",void 0),h(this,"consentData",void 0),h(this,"storedPrivacyData",void 0),h(this,"localStorage",void 0),h(this,"_consentRequested",!1),this.invocationId=t,this.localStorage=e,this.storageConfig=n,this.resetConsentData()}return d(l,[{key:"requestConsent",value:function(t,e,n,r){if(t)this.consentData=new m,Object(f.v)(this.invocationId,"cmpApi: ID5 is operating in forced consent mode and will not retrieve any consent signals from the CMP"),r(this.consentData);else if(this._consentRequested)r(this.consentData);else switch(this.consentData=new m,this._consentRequested=!0,e){case"static":this.parseStaticConsentData(n,r);break;case"iab":this.lookupIabConsent(r);break;default:Object(f.t)(this.invocationId,"cmpApi: Unknown consent API: ".concat(e)),this.resetConsentData(),r(this.consentData)}}},{key:"getOrCreateConsentData",value:function(){return this.consentData||(this.consentData=new m),this.consentData}},{key:"parseStaticConsentData",value:function(t,e){t=t||{};var n={};Object(f.r)(t.getConsentData)?n=l.parseTcfData(t,1):Object(f.r)(t.getTCData)?n=l.parseTcfData(t.getTCData,2):Object(f.j)(t.allowedVendors)?n={api:b.ID5_ALLOWED_VENDORS,allowedVendors:t.allowedVendors.map(function(t){return String(t)}),gdprApplies:!0}:Object(f.r)(t.getUSPData)?n=l.parseUspData(t.getUSPData):Object(f.v)(this.invocationId,"cmpApi: No static consent data detected! Using defaults."),c(this.consentData,n),Object(f.u)(this.invocationId,"cmpApi: Detected API '".concat(this.consentData.api,"' from static consent data"),t),e(this.consentData)}},{key:"lookupIabConsent",value:function(n){var r=this,i=[],t=function(e){return i[e]=!1,function(t){i[e]||(i[e]=!0,t&&c(r.consentData,t),i.every(function(t){return t})&&n(r.consentData))}},e=t(0),t=t(1);this.lookupTcf(e),this.lookupUsp(t)}},{key:"lookupUsp",value:function(n){var r=this,t=l.findUsp(),e=t.uspapiFrame,t=t.uspapiFunction;if(!e)return Object(f.v)(this.invocationId,"cmpApi: USP not found! Using defaults for CCPA."),void n();(Object(f.n)(t)?(Object(f.u)(this.invocationId,"cmpApi: Detected USP is directly accessible, calling it now."),t):(Object(f.u)(this.invocationId,"cmpApi: Detected USP is outside the current iframe. Using message passing."),l.buildCmpSurrogate("uspv1",e)))("getUSPData",1,function(t,e){e?n(l.parseUspData(t)):(Object(f.t)(r.invocationId,"cmpApi: USP callback not succesful. Using defaults for CCPA."),n())})}},{key:"lookupTcf",value:function(t){var e=l.findTCF(),n=e.cmpVersion,r=e.cmpFrame,e=e.cmpFunction;if(!r)return Object(f.v)(this.invocationId,"cmpApi: TCF not found! Using defaults for GDPR."),void t();Object(f.n)(e)?this.lookupDirectTcf(n,e,t):(Object(f.u)(this.invocationId,"cmpApi: Detected TCF is outside the current iframe. Using message passing."),this.lookupMessageTcf(n,r,t))}},{key:"lookupMessageTcf",value:function(t,e,n){e=l.buildCmpSurrogate(1===t?"tcfv1":"tcfv2",e);this.lookupDirectTcf(t,e,n)}},{key:"lookupDirectTcf",value:function(t,e,r){function i(t,e,n){Object(f.u)(a.invocationId,"cmpApi: TCFv".concat(t," - Received a call back: ").concat(e),n)}function o(t,e){Object(f.t)(a.invocationId,"cmpApi: TCFv".concat(t," - Received insuccess: ").concat(e,". Please check your CMP setup. Using defaults for GDPR."))}var n,a=this,c={},s={},u=function(n){return s[n]=!1,function(t,e){s[n]=!0,e?(i(1,n,t),c[n]=t):o(1,n),Object.values(s).every(function(t){return t})&&r(l.parseTcfData(c,1))}};1===t?(n=u("getConsentData"),u=u("getVendorConsents"),e("getConsentData",null,n),e("getVendorConsents",null,u)):2===t&&e("addEventListener",t,function(t,e){if(i(2,"event",t),!e)return o(2,"addEventListener"),void r();!t||!1!==t.gdprApplies&&"tcloaded"!==t.eventStatus&&"useractioncomplete"!==t.eventStatus||r(l.parseTcfData(t,2))})}},{key:"resetConsentData",value:function(){this.consentData=void 0,this.storedPrivacyData=void 0,this._consentRequested=!1}},{key:"localStorageGrant",value:function(t,e){if(!0===t||!0===e)return Object(f.v)(this.invocationId,"cmpApi: Local storage access granted by configuration override, consent will not be checked"),new g(!0,y.FORCE_ALLOWED_BY_CONFIG,b.NONE);if(this.consentData&&this.consentData.api!==b.NONE)return this.consentData.localStorageGrant();if(Object(f.r)(this.storedPrivacyData)||(n=this.localStorage.getItemWithExpiration(this.storageConfig.PRIVACY),this.storedPrivacyData=n&&JSON.parse(n),Object(f.u)(this.invocationId,"cmpApi: Loaded stored privacy data from local storage",this.storedPrivacyData)),this.storedPrivacyData&&!0===this.storedPrivacyData.id5_consent)return new g(!0,y.ID5_CONSENT,b.NONE);if(!this.storedPrivacyData||!Object(f.l)(this.storedPrivacyData.jurisdiction))return new g(!0,y.PROVISIONAL,b.NONE);var n=this.storedPrivacyData.jurisdiction,n=n in i.a.PRIVACY.JURISDICTIONS&&i.a.PRIVACY.JURISDICTIONS[n];return new g(!1===n,y.JURISDICTION,b.NONE)}},{key:"setStoredPrivacy",value:function(t){try{Object(f.r)(t)?(this.storedPrivacyData=t,this.localStorage.setItemWithExpiration(this.storageConfig.PRIVACY,JSON.stringify(t))):Object(f.t)(this.invocationId,"cmpApi: Cannot store privacy data if it is not an object",t)}catch(t){Object(f.t)(this.invocationId,"cmpApi: Error while storing privacy data",t)}}}],[{key:"buildCmpSurrogate",value:function(c,s){return function(t,e,n){var r=Math.random()+"",i=v[c],o={},a={};a[i.objKeys[0]]=t,a[i.objKeys[1]]=e,a.callId=r,o[i.objName]=a;a=function t(e){e=Object(f.f)(e,"data.".concat(i.returnObjName));e&&e.callId===r&&(window.removeEventListener("message",t),n(e.returnValue,e.success))};window.addEventListener("message",a,!1),s.postMessage(o,"*")}}},{key:"parseUspData",value:function(t){if(Object(f.r)(t)&&Object(f.s)(t.uspString))return{api:b.USP_V1,hasCcpaString:!0,ccpaString:t.uspString};Object(f.t)(this.invocationId,"cmpApi: No or malformed USP data. Using defaults for CCPA.")}},{key:"parseTcfData",value:function(t,e){var n,r;if(1===e)n=l.isValidV1ConsentObject,r=l.normalizeV1Data;else{if(2!==e)return void Object(f.t)(this.invocationId,"cmpApi: No or malformed CMP data. Using defaults for GDPR.");n=l.isValidV2ConsentObject,r=l.normalizeV2Data}if(n(t))return r(t);Object(f.t)(this.invocationId,"cmpApi: Invalid CMP data. Using defaults for GDPR.",t)}},{key:"isValidV1ConsentObject",value:function(t){var e=Object(f.f)(t,"getConsentData.gdprApplies");return!!Object(f.k)(e)&&(!1===e||Object(f.s)(t.getConsentData.consentData)&&Object(f.r)(t.getVendorConsents)&&1<Object.keys(t.getVendorConsents).length)}},{key:"isValidV2ConsentObject",value:function(t){var e=t&&t.gdprApplies,t=t&&t.tcString;return!1===e||Object(f.s)(t)}},{key:"normalizeV1Data",value:function(t){return{consentString:t.getConsentData.consentData,localStoragePurposeConsent:Object(f.f)(t,"getVendorConsents.purposeConsents.1"),gdprApplies:t.getConsentData.gdprApplies,api:b.TCF_V1}}},{key:"normalizeV2Data",value:function(t){var e=Object(f.f)(t,"purpose.consents.1");return Object(f.k)(e)||(e=Object(r.a)(t.tcString,1)),{consentString:t.tcString,localStoragePurposeConsent:e,gdprApplies:t.gdprApplies,api:b.TCF_V2}}},{key:"findTCF",value:function(){for(var t,e,n=0,r=window;!t;){try{if("function"==typeof r.__tcfapi||"function"==typeof r.__cmp){e="function"==typeof r.__tcfapi?(n=2,r.__tcfapi):(n=1,r.__cmp),t=r;break}}catch(t){}try{if(r.frames.__tcfapiLocator){n=2,t=r;break}}catch(t){}try{if(r.frames.__cmpLocator){n=1,t=r;break}}catch(t){}if(r===window.top)break;r=r.parent}return{cmpVersion:n,cmpFrame:t,cmpFunction:e}}},{key:"findUsp",value:function(){for(var t,e,n=window;!t;){try{if("function"==typeof n.__uspapi){e=n.__uspapi,t=n;break}}catch(t){}try{if(n.frames.__uspapiLocator){t=n;break}}catch(t){}if(n===window.top)break;n=n.parent}return{uspapiFrame:t,uspapiFunction:e}}}]),l}()},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function o(t,e,n){return(e=a(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){t=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);e=n.call(t,e||"default");if("object"!==r(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===r(t)?t:String(t)}n.d(e,"a",function(){return s});var c="_exp",s=function(){function n(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),o(this,"available",!1),o(this,"win",void 0),o(this,"writingEnabled",void 0),this.win=t,this.writingEnabled=e;e="__id5test";try{this.writingEnabled&&this.win.localStorage.setItem(e,e),this.win.localStorage.removeItem(e),this.available=!0}catch(t){}}var t,e,r;return t=n,(e=[{key:"isAvailable",value:function(){return this.available}},{key:"getItem",value:function(t){if(this.available)return this.win.localStorage.getItem(t)}},{key:"setItem",value:function(t,e){this.available&&this.writingEnabled&&this.win.localStorage.setItem(t,e)}},{key:"removeItem",value:function(t){this.available&&this.win.localStorage.removeItem(t)}},{key:"getItemWithExpiration",value:function(t){var e=t.name,t=this.getItem(e+c);return!t||new Date(t).getTime()-Date.now()<=0?(this.removeItemWithExpiration({name:e}),null):this.getItem(e)}},{key:"setItemWithExpiration",value:function(t,e){var n=t.name,t=t.expiresDays,t=Date.now()+864e5*t,t=new Date(t).toUTCString();this.setItem(n+c,t),this.setItem(n,e)}},{key:"removeItemWithExpiration",value:function(t){t=t.name;this.removeItem(t),this.removeItem(t+c)}}])&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),n}()},function(t,e){var n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var e=n(1),s=n.n(e),u=n(0);n(3);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function l(t,e,n){return(e=o(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){t=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);e=n.call(t,e||"default");if("object"!==r(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===r(t)?t:String(t)}var a=function(){function c(t,e,n,r,i){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),l(this,"isEnabled",void 0),l(this,"invocationId",void 0),l(this,"localStorage",void 0),l(this,"storageConfig",void 0),l(this,"_windowObj",void 0),l(this,"_handler",void 0),l(this,"_hasLiveIntentId",!1),l(this,"_liveIntentId",void 0),l(this,"_liveIntentIdTimestamp",void 0);var a=this;this._windowObj=t,this.isEnabled=e,this.invocationId=n,this.localStorage=r,this.storageConfig=i,e&&(this._checkLocalStorage(),Object(u.u)(this.invocationId,"Starting polling detection of LiveIntent API"),this._handler=setInterval(function(){Object(u.f)(o._windowObj,"liQ.ready")&&(Object(u.u)(o.invocationId,"Stopping polling detection of LiveIntent API: found"),clearInterval(a._handler),a._onDetected())},s.a.LIVE_INTENT_POLL_INTERVAL_MS))}var t,e,n;return t=c,(e=[{key:"_checkLocalStorage",value:function(){var t;this.localStorage.isAvailable()&&(t=this.localStorage.getItemWithExpiration(this.storageConfig.LIVE_INTENT),t=Object(u.s)(t)?JSON.parse(t):void 0,Object(u.r)(t)&&(Object(u.u)(this.invocationId,"Retrieved LiveIntent ID from local storage"),this._setLiveIntentId(t)))}},{key:"_onDetected",value:function(){var e=this;Object(u.u)(this.invocationId,"Detected LiveIntent API on the page! Requesting their ID.");var t=Object(u.f)(this._windowObj,"liQ.resolve");if(Object(u.n)(t))try{t(function(t){Object(u.u)(e.invocationId,"Received LiveIntent API `resolve` lookup response",t),t.unifiedId&&e._setLiveIntentIdFromResponse(t.unifiedId,Date.now())})}catch(t){Object(u.t)("Error caught while calling resolve() on LiveIntent API",t)}}},{key:"_setLiveIntentIdFromResponse",value:function(t,e){e={liveIntentId:t,timestamp:e};this.localStorage.setItemWithExpiration(this.storageConfig.LIVE_INTENT,JSON.stringify(e)),this._setLiveIntentId(e)}},{key:"_setLiveIntentId",value:function(t){Object(u.u)(self.invocationId,"Received LiveIntent ID",t),this._liveIntentId=t.liveIntentId,this._liveIntentIdTimestamp=t.timestamp,this._hasLiveIntentId=!0}},{key:"getLiveIntentId",value:function(){return this.isEnabled?this._liveIntentId:void 0}},{key:"hasLiveIntentId",value:function(){return this.isEnabled&&this._hasLiveIntentId}}])&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}()},function(t,e,n){"use strict";n.d(e,"d",function(){return b}),n.d(e,"c",function(){return y}),n.d(e,"a",function(){return g}),n.d(e,"b",function(){return m});var i=n(7);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)}function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=s(n);return function(t,e){{if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=s(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function f(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t,e,n){return(e=h(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){t=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);e=n.call(t,e||"default");if("object"!==o(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===o(t)?t:String(t)}var p=Object.freeze({TIMER:"TIMER",SUMMARY:"SUMMARY",COUNTER:"COUNTER"}),v=function(){function r(t,e,n){u(this,r),d(this,"name",void 0),d(this,"tags",void 0),d(this,"values",void 0),this.name=t,this.tags=i.a.from(e),this.type=n,this.values=[]}return f(r,[{key:"reset",value:function(){this.values=[]}}]),r}(),b=function(){a(r,v);var n=c(r);function r(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return u(this,r),n.call(this,t,e,p.TIMER)}return f(r,[{key:"startMeasurement",value:function(){try{return new y(this)}catch(t){return}}},{key:"record",value:function(t){try{this.values.push({value:t,timestamp:Date.now()})}catch(t){}}},{key:"recordNow",value:function(){try{var t;this.record(0|(null===(t=performance)||void 0===t?void 0:t.now()))}catch(t){}}}]),r}(),y=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;u(this,e),this.timer=t,this.startTime=performance.now()}return f(e,[{key:"record",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;try{var e=performance.now()-this.startTime|0,n=t||this.timer;return n&&n.record(e),e}catch(t){return}}}]),e}(),g=function(){a(r,v);var n=c(r);function r(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return u(this,r),n.call(this,t,e,p.COUNTER)}return f(r,[{key:"inc",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;try{0===this.values.length?this.values.push({value:t,timestamp:Date.now()}):(this.values[0].value+=t,this.values[0].timestamp=Date.now())}catch(t){}}}]),r}(),m=function(){a(r,v);var n=c(r);function r(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return u(this,r),n.call(this,t,e,p.SUMMARY)}return f(r,[{key:"record",value:function(t){try{this.values.push({value:t,timestamp:Date.now()})}catch(t){}}}]),r}()},function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,c=[],s=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,i=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var o=Object.freeze({});e.a={EMPTY:o,from:function(t){return t?t instanceof Map?Object.fromEntries(t):t:o},toString:function(t){return Array.from(Object.entries(t),function(t){var e=r(t,2),t=e[0],e=e[1];return"".concat(t,"=").concat(e)}).sort().toString()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n=n(9);window.ID5||(window.ID5=n.a)},function(t,e,n){"use strict";var g=n(0),i=n(10),l=n(11),f=n(2),d=n(13),a=n(14),h=n(3),p=n(15),v=n(5),m=n(16),s=n(24);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){O(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,c=[],s=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,i=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I(r.key),r)}}function O(t,e,n){return(e=I(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I(t){t=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);e=n.call(t,e||"default");if("object"!==r(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===r(t)?t:String(t)}var S="https://id5-sync.com",n=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),O(this,"loaded",!1),O(this,"_isUsingCdn",!1),O(this,"_referer",!1),O(this,"_version",a.a),O(this,"versions",{}),O(this,"invocationId",0),this.loaded=!0,this._isUsingCdn=!!(document&&document.currentScript&&document.currentScript.src&&0===document.currentScript.src.indexOf("https://cdn.id5-sync.com")),this._referer=Object(i.a)(),this.versions[a.a]=!0}var e,n,r;return e=t,(n=[{key:"debug",get:function(){return Object(g.o)()},set:function(t){Object(g.y)(t)}},{key:"init",value:function(t){var e=this.invocationId;this.invocationId+=1;try{Object(g.u)(e,"ID5 API version ".concat(this._version,". Invoking init()"),t);var n=new p.a(e,t),r=n.getOptions(),i=this._configureDiagnostics(r);i&&(i.loadDelayTimer().recordNow(),i.invocationCountSummary().record(this.invocationId));var o=new h.a(window.top,!r.applyCreativeRestrictions),a=new v.a(window,!r.disableLiveIntentIntegration,e,o,n.storageConfig),c=new f.b(e,o,n.storageConfig),s=new l.a(e,function(){return c.localStorageGrant(r.allowLocalStorageWithoutConsentApi,r.debugBypassConsent)},o,n.storageConfig),u=new d.a(e,n,s,c,a,i);return this.getId(u,!1),Object(g.u)(e,"ID5 initialized for partner ".concat(r.partnerId," with referer ").concat(this._referer.referer," and options"),t),u}catch(t){Object(g.t)(e,"Exception caught during init()",t)}}},{key:"refreshId",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!Object(g.k)(t))throw new Error("Invalid signature for refreshId(): second parameter must be a boolean");try{Object(g.u)(e.invocationId,"Invoking refreshId()",arguments),e.startRefresh(t),e.updateOptions(n),e.consentManagement.resetConsentData(),this.getId(e,t)}catch(t){Object(g.t)(e.invocationId,"Exception caught from refreshId()",t)}return e}},{key:"getId",value:function(e){var n=this,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1];Object(g.l)(window.navigator.userAgentData)&&!e.getOptions().disableUaHints?this.gatherUaHints().then(function(t){return n.getIdWithUaHints(e,Object(g.g)(t),r)}).catch(function(t){Object(g.t)("Error while calling navigator.userAgentData.getHighEntropyValues()",t),n.getIdWithUaHints(e,void 0,r)}):this.getIdWithUaHints(e,void 0,r)}},{key:"getIdWithUaHints",value:function(o,a,c){var s,t,e,u=this,l=o.getOptions(),f=0,d=!1,h=!1,p=!1,v=!1,b=l.refreshInSeconds,n=o.localStorageGrant();n.isDefinitivelyAllowed()&&(Object(g.u)(o.invocationId,"Using local storage for cached ID",n),s=o.clientStore.getResponse(),t=o.clientStore.getDateTime(),Object(g.q)(null===s||void 0===s||null===(e=s.cache_control)||void 0===e?void 0:e.max_age_sec)&&(b=s.cache_control.max_age_sec),d=t<=0||Date.now()-t>1e3*b,f=o.clientStore.getNb(l.partnerId),h=!o.clientStore.isStoredPdUpToDate(l.partnerId,l.pd),p=!o.clientStore.storedSegmentsMatchesSegments(l.partnerId,l.segments)),s||(Object(g.u)(o.invocationId,"No cached ID found"),s=o.clientStore.getResponseFromLegacyCookie(),d=!0),s&&s.universal_uid&&!h&&!p?(Object(g.u)(o.invocationId,"ID5 User ID available from cache:",{storedResponse:s,storedDateTime:t,refreshNeeded:d}),t<=0||12096e5<Date.now()-t||(o.setUserId(s,!0),f=o.clientStore.incNb(l.partnerId,f),v=!0)):s&&s.universal_uid&&h?Object(g.u)(o.invocationId,"PD value has changed, so ignoring User ID from cache"):s&&s.universal_uid&&p?Object(g.u)(o.invocationId,"Segments have changed, so ignoring User ID from cache"):s&&!s.universal_uid?Object(g.t)(o.invocationId,"Invalid stored response: ",s):Object(g.u)(o.invocationId,"No ID5 User ID available from cache");var y=null===(t=o._metrics)||void 0===t?void 0:t.consentRequestTimer(l.debugBypassConsent?"bypass":l.cmpApi).startMeasurement();o.consentManagement.requestConsent(l.debugBypassConsent,l.cmpApi,l.consentData,function(e){y&&y.record();var t,n,r,i=o.localStorageGrant();Object(g.u)(o.invocationId,"Local storage grant",i),i.allowed?(s=o.clientStore.getResponse()||o.clientStore.getResponseFromLegacyCookie(),t=!o.clientStore.storedConsentDataMatchesConsentData(e),o.clientStore.putHashedConsentData(e),o.clientStore.isStoredPdUpToDate(l.partnerId,l.pd)||o.clientStore.putHashedPd(l.partnerId,l.pd),o.clientStore.putHashedSegments(l.partnerId,l.segments),((i=!s||!s.universal_uid||!s.signature)||d||t||h||p||c)&&(Object(g.u)(o.invocationId,"Decided to fetch a fresh ID5 ID",{missingStoredData:i,refreshInSecondsHasElapsed:d,consentHasChanged:t,pdHasChanged:h,segmentsHaveChanged:p,forceFetch:c}),n=null===(t=o._metrics)||void 0===t?void 0:t.extensionsCallTimer().startMeasurement(),r=u.gatherData(l,o,f,e,s,a,b,o.getProvidedOptions()),m.a.gather(o.invocationId).then(function(t){n&&n.record(),r.extensions=t,u.fetchFreshID5ID(r,l,e,o,c,v)}))):Object(g.u)(o.invocationId,"No legal basis to use ID5",e)})}},{key:"gatherData",value:function(n,t,e,r,i,o,a,c){var s={partner:n.partnerId,v:this._version,o:"api",tml:this._referer.topmostLocation,ref:this._referer.ref,cu:this._referer.canonicalUrl,u:this._referer.stack[0]||window.location.href,top:this._referer.reachedTop?1:0,localStorage:t.clientStore.isLocalStorageAvailable()?1:0,nbPage:e,id5cdn:this._isUsingCdn,ua:window.navigator.userAgent,att:n.att},e=r.gdprApplies;Object(g.l)(e)&&(s.gdpr=e?1:0);e=r.consentString;Object(g.l)(e)&&(s.gdpr_consent=e),Object(g.l)(r.allowedVendors)&&(s.allowed_vendors=r.allowedVendors);i=i&&i.signature?i.signature:void 0;return Object(g.l)(i)&&(s.s=i),Object(g.l)(o)&&(s.ua_hints=o),r.hasCcpaString&&(s.us_privacy=r.ccpaString),t.liveIntentApi.hasLiveIntentId()&&(s.li=t.liveIntentApi.getLiveIntentId()),Object(g.w)({pd:"pd",partnerUserId:"puid",provider:"provider",segments:"segments"}).forEach(function(t){var e=u(t,2),t=e[0],e=e[1];Object(g.l)(n[t])&&(s[e]=n[t])}),!0===n.abTesting.enabled&&(s.ab_testing={enabled:!0,control_group_pct:t.getOptions().abTesting.controlGroupPct}),0<t.getInvalidSegments()&&(s._invalid_segments=t.getInvalidSegments()),Object(g.p)()&&(s._trace=!0),s.provided_options={refresh_in_seconds:c.refreshInSeconds},s.used_refresh_in_seconds=a,s}},{key:"fetchFreshID5ID",value:function(t,e,n,r,i,o){var a="".concat(S,"/g/v2/").concat(e.partnerId,".json"),c=Object(s.d)();Object(g.u)(r.invocationId,"Fetching ID5 ID (forceFetch:".concat(i,") from:"),a,t),Object(g.a)(a,{success:this.handleSuccessfulFetchResponse(r,e,o,n,c),error:function(t){Object(g.t)(r.invocationId,"Error during AJAX request to ID5 server",t),c&&c.record(null===(t=r._metrics)||void 0===t?void 0:t.fetchFailureCallTimer())}},JSON.stringify(t),{method:"POST",withCredentials:!0})}},{key:"handleSuccessfulFetchResponse",value:function(o,a,c,s,u){var l=this;return function(t){u&&u.record(null===(e=o._metrics)||void 0===e?void 0:e.fetchSuccessfulCallTimer());var e=l.validateResponseIsCorrectJson(t,o,"fetch");if(e)if(Object(g.s)(e.universal_uid)){Object(g.u)(o.invocationId,"Valid json response from ID5 received",e);try{o.setUserId(e,!1),o.consentManagement.setStoredPrivacy(e.privacy);var n,r,i=o.localStorageGrant();i.isDefinitivelyAllowed()?(Object(g.u)(o.invocationId,"Storing ID in cache"),o.clientStore.putResponse(t),o.clientStore.setDateTime((new Date).toUTCString()),o.clientStore.setNb(a.partnerId,c?0:1)):(Object(g.u)(o.invocationId,"Cannot use local storage to cache ID",i),o.clientStore.clearAll(a.partnerId)),o.clientStore.removeLegacyCookies(a.partnerId),!0===e.cascade_needed&&i.isDefinitivelyAllowed()&&0<=a.maxCascades&&!a.applyCreativeRestrictions&&(n=a.partnerUserId&&0<a.partnerUserId.length,r="".concat(S,"/").concat(n?"s":"i","/").concat(a.partnerId,"/").concat(a.maxCascades,".gif?id5id=").concat(o._userId,"&o=api&").concat(n?"puid="+a.partnerUserId+"&":"","gdpr_consent=").concat(s.consentString,"&gdpr=").concat(s.gdprApplies),Object(g.u)(o.invocationId,"Opportunities to cascade available",r),Object(g.e)(r))}catch(t){Object(g.t)(o.invocationId,"Error during processing of valid ID5 server response",e,t)}}else Object(g.t)(o.invocationId,"Server response failed to validate",e)}}},{key:"validateResponseIsCorrectJson",value:function(e,n,r){if(!e||!Object(g.s)(e)||e.length<1)Object(g.t)(n.invocationId,"Empty ".concat(r,' response from ID5 servers: "').concat(e,'"'));else try{return JSON.parse(e)}catch(t){Object(g.t)(n.invocationId,"Cannot parse the JSON server ".concat(r," response"),e)}return null}},{key:"gatherUaHints",value:function(){return window.navigator.userAgentData.getHighEntropyValues(["architecture","fullVersionList","model","platformVersion"])}},{key:"_configureDiagnostics",value:function(t){try{var e,n,r,i,o=new s.a("api",a.a);return o.addCommonTags(c(c({},Object(s.c)(t.partnerId)),{},{tml:this._referer.topmostLocation})),null!==(e=t.diagnostics)&&void 0!==e&&e.publishingDisabled||(i=Object(s.b)(t.diagnostics.publishingSampleRatio),null!==(n=t.diagnostics)&&void 0!==n&&n.publishAfterLoadInMsec&&0<t.diagnostics.publishAfterLoadInMsec&&o.schedulePublishAfterMsec(t.diagnostics.publishAfterLoadInMsec,i),null!==(r=t.diagnostics)&&void 0!==r&&r.publishBeforeWindowUnload&&o.schedulePublishBeforeUnload(i)),o}catch(t){return void Object(g.t)(this.invocationId,"Failed to configure diagnostics",t)}}}])&&y(e.prototype,n),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}());e.a=n},function(t,e,n){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}n.d(e,"a",function(){return r});var a,r=(a=window,function(){try{var t,e,n=c(),r=n.length-1,i=null!==n[r].location||0<r&&null!==n[r-1].referrer,o=function(t){for(var e,n=[],r=null,i=null,o=null,a=null,c=null,s=t.length-1;0<=s;s--){try{i=t[s].location}catch(t){}if(i)n.push(i),c=c||i;else if(0!==s){e=t[s-1];try{o=e.referrer,a=e.ancestor}catch(t){}o?(n.push(o),c=c||o):a?(n.push(a),c=c||a):n.push(r)}else n.push(r)}return{stack:n,detectedRefererUrl:c}}(n);n[n.length-1].canonicalUrl&&(t=n[n.length-1].canonicalUrl);try{e=a.top.document.referrer}catch(t){}return{topmostLocation:o.detectedRefererUrl,ref:e||null,reachedTop:i,numIframes:r,stack:o.stack,canonicalUrl:t}}catch(t){}});function c(){var t=function(){var e,n=[];do{try{e=e?e.parent:a;try{var t=e===a.top,r={referrer:e.document.referrer||null,location:e.location.href||null,isTop:t};t&&(r=i(r,{canonicalUrl:function(t){try{var e=t.querySelector("link[rel='canonical']");if(null!==e)return e.href}catch(t){}return null}(e.document)})),n.push(r)}catch(t){n.push({referrer:null,location:null,isTop:e===a.top})}}catch(t){return n.push({referrer:null,location:null,isTop:!1}),n}}while(e!==a.top);return n}(),e=function(){try{return a.location.ancestorOrigins?a.location.ancestorOrigins:void 0}catch(t){}}();if(e)for(var n=0,r=e.length;n<r;n++)t[n].ancestor=e[n];return t}},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var o=n(0),e=n(1),r=n.n(e),a=n(2);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function s(t,e,n){return(e=u(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t){t=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);e=n.call(t,e||"default");if("object"!==i(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===i(t)?t:String(t)}var l=function(){function i(t,e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),s(this,"invocationId",void 0),s(this,"localStorageGrantChecker",void 0),s(this,"localStorage",void 0),this.invocationId=t,this.localStorageGrantChecker=e,this.localStorage=n,this.storageConfig=r}var t,e,n;return t=i,n=[{key:"makeStoredHash",value:function(t){return Object(o.c)("string"==typeof t?t:"")}},{key:"storedDataMatchesCurrentData",value:function(t,e){return null==t||t===e}}],(e=[{key:"get",value:function(t){try{var e=this.localStorageGrant();if(e.isDefinitivelyAllowed()){var n=this.localStorage.getItemWithExpiration(t);return Object(o.u)(this.invocationId,"Local storage get key=".concat(t.name," value=").concat(n)),n}Object(o.v)(this.invocationId,"clientStore.get() has been called without definitive grant",e)}catch(t){Object(o.t)(this.invocationId,t)}}},{key:"clear",value:function(t){try{this.localStorage.removeItemWithExpiration(t)}catch(t){Object(o.t)(this.invocationId,t)}}},{key:"put",value:function(t,e){try{var n=this.localStorageGrant();n.isDefinitivelyAllowed()?(Object(o.u)(this.invocationId,"Local storage put key=".concat(t.name," value=").concat(e)),this.localStorage.setItemWithExpiration(t,e)):Object(o.v)(this.invocationId,"clientStore.put() has been called without definitive grant",n)}catch(t){Object(o.t)(this.invocationId,t)}}},{key:"localStorageGrant",value:function(){return this.localStorageGrantChecker()}},{key:"isLocalStorageAvailable",value:function(){return this.localStorage.isAvailable()}},{key:"getResponseFromLegacyCookie",value:function(){var e;return r.a.LEGACY_COOKIE_NAMES.forEach(function(t){Object(o.h)(t)&&(e=Object(o.h)(t))}),e?JSON.parse(e):null}},{key:"getResponse",value:function(){var t=this.get(this.storageConfig.ID5);return t&&JSON.parse(decodeURIComponent(t))}},{key:"clearResponse",value:function(){this.clear(this.storageConfig.ID5)}},{key:"putResponse",value:function(t){this.put(this.storageConfig.ID5,encodeURIComponent(t))}},{key:"getHashedConsentData",value:function(){return this.get(this.storageConfig.CONSENT_DATA)}},{key:"clearHashedConsentData",value:function(){this.clear(this.storageConfig.CONSENT_DATA)}},{key:"putHashedConsentData",value:function(t){t!==new a.a&&this.put(this.storageConfig.CONSENT_DATA,t.hashCode())}},{key:"getHashedPd",value:function(t){return this.get(this.pdCacheConfig(t))}},{key:"isStoredPdUpToDate",value:function(t,e){var n=this.getHashedPd(t),r=Object(o.m)(e)&&!Object(o.m)(n),t=Object(o.m)(n)&&Object(o.m)(e);return r||t||n===i.makeStoredHash(e)}},{key:"clearHashedPd",value:function(t){this.clear(this.pdCacheConfig(t))}},{key:"putHashedPd",value:function(t,e){this.put(this.pdCacheConfig(t),i.makeStoredHash(e))}},{key:"getHashedSegments",value:function(t){return this.get(this.segmentsCacheConfig(t))}},{key:"putHashedSegments",value:function(t,e){this.put(this.segmentsCacheConfig(t),i.makeStoredHash(JSON.stringify(e)))}},{key:"storedSegmentsMatchesSegments",value:function(t,e){return i.storedDataMatchesCurrentData(this.getHashedSegments(t),i.makeStoredHash(JSON.stringify(e)))}},{key:"clearHashedSegments",value:function(t){this.clear(this.segmentsCacheConfig(t))}},{key:"getDateTime",value:function(){return new Date(this.get(this.storageConfig.LAST)).getTime()}},{key:"clearDateTime",value:function(){this.clear(this.storageConfig.LAST)}},{key:"setDateTime",value:function(t){this.put(this.storageConfig.LAST,t)}},{key:"getNb",value:function(t){t=this.get(this.nbCacheConfig(t));return t?parseInt(t):0}},{key:"clearNb",value:function(t){this.clear(this.nbCacheConfig(t))}},{key:"setNb",value:function(t,e){this.put(this.nbCacheConfig(t),e)}},{key:"incNb",value:function(t,e){return e=Math.round(e+1),this.setNb(t,e),e}},{key:"pdCacheConfig",value:function(t){return this.storageConfig.PD.withNameSuffixed(t)}},{key:"nbCacheConfig",value:function(t){return this.storageConfig.ID5.withNameSuffixed(t,"nb")}},{key:"segmentsCacheConfig",value:function(t){return this.storageConfig.SEGMENTS.withNameSuffixed(t)}},{key:"clearAll",value:function(t){this.clearResponse(),this.clearDateTime(),this.clearNb(t),this.clearHashedPd(t),this.clearHashedSegments(t),this.clearHashedConsentData()}},{key:"removeLegacyCookies",value:function(e){var n=new Date(Date.now()-1e3).toUTCString();r.a.LEGACY_COOKIE_NAMES.forEach(function(t){Object(o.x)("".concat(t),"",n),Object(o.x)("".concat(t,"_nb"),"",n),Object(o.x)("".concat(t,"_").concat(e,"_nb"),"",n),Object(o.x)("".concat(t,"_last"),"",n),Object(o.x)("".concat(t,".cached_pd"),"",n),Object(o.x)("".concat(t,".cached_consent_data"),"",n)})}},{key:"storedConsentDataMatchesConsentData",value:function(t){return i.storedDataMatchesCurrentData(this.getHashedConsentData(),t.hashCode())}}])&&c(t.prototype,e),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}()},function(t,e,n){"use strict";e.a=function(t,e){var n=152+e-1,e=~~(n/i);if(!t||"C"!==t.charAt(0)||t.length<=e)return;e=t.charAt(e),e=r[e];return void 0!==e?0!=(e&1<<i-n%i-1):void 0};var r={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"-":62,_:63,"+":62,"/":63},i=6},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var e=n(1),r=n.n(e),o=n(0);n(2),n(5);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(){return(c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e,n){return(e=a(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){t=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);e=n.call(t,e||"default");if("object"!==i(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===i(t)?t:String(t)}var f=function(){function a(t,e,n,r,i,o){u(this,a),l(this,"_availableCallbackTimerId",void 0),l(this,"_availableCallbackFired",!1),l(this,"_availableCallback",void 0),l(this,"_updateCallback",void 0),l(this,"_refreshCallbackTimerId",void 0),l(this,"_refreshCallbackFired",!1),l(this,"_refreshCallback",void 0),l(this,"_isExposed",void 0),l(this,"_fromCache",void 0),l(this,"_isRefreshing",!1),l(this,"_isRefreshingWithFetch",!1),l(this,"_userId",void 0),l(this,"_ext",void 0),l(this,"_userIdAvailable",!1),l(this,"invocationId",void 0),l(this,"config",void 0),l(this,"clientStore",void 0),l(this,"consentManagement",void 0),l(this,"liveIntentApi",void 0),l(this,"_metrics",void 0),this.invocationId=t,this.config=e,this.clientStore=n,this.consentManagement=r,this.liveIntentApi=i,this._metrics=o}var t,e,n;return t=a,n=[{key:"doFireOnAvailableCallBack",value:function(t){Object(o.u)(t.invocationId,"Id5Status.doFireOnAvailableCallBack"),t._availableCallbackFired=!0,t._availableCallbackTimerId=void 0,t._availableCallback(t)}},{key:"doFireOnUpdateCallBack",value:function(t){Object(o.u)(t.invocationId,"Id5Status.doFireOnUpdateCallBack"),t._updateCallback(t)}},{key:"doFireOnRefreshCallBack",value:function(t){Object(o.u)(t.invocationId,"Id5Status.doFireOnRefreshCallBack"),t._refreshCallbackFired=!0,t._refreshCallbackTimerId=void 0,t._isRefreshing=!1,t._isRefreshingWithFetch=!1,t._refreshCallback(t)}}],(e=[{key:"getOptions",value:function(){return this.config.getOptions()}},{key:"getProvidedOptions",value:function(){return this.config.getProvidedOptions()}},{key:"getInvalidSegments",value:function(){return this.config.getInvalidSegments()}},{key:"updateOptions",value:function(t){return this.config.updOptions(t)}},{key:"startRefresh",value:function(t){this._isRefreshing=!0,this._isRefreshingWithFetch=t}},{key:"setUserId",value:function(t,e){var n=this,r=t.universal_uid;if(this._isExposed=!0,Object(o.r)(t.ab_testing))switch(t.ab_testing.result){case"normal":break;default:case"error":Object(o.t)(this.invocationId,"Id5Status: There was an error with A/B Testing. Make sure controlGroupRatio is a number >= 0 and <= 1");break;case"control":this._isExposed=!1,this.info("User is in control group!")}var i=this._userId!==r||!1===Object(o.d)(this._ext,t.ext);this._userIdAvailable=!0,this._userId=r,this._ext=t.ext,this._fromCache=e,this.info("User id updated, hasChanged: ".concat(i,", fromCache: ").concat(e)),Object(o.n)(this._availableCallback)&&!1===this._availableCallbackFired&&(this._availableCallbackTimerId&&(this.info("Cancelling pending onAvailableCallback watchdog"),clearTimeout(this._availableCallbackTimerId),this._availableCallbackTimerId=void 0),this._availableCallbackTimerId=setTimeout(function(){return a.doFireOnAvailableCallBack(n)},0)),this._isRefreshing&&Object(o.n)(this._refreshCallback)&&!1===this._refreshCallbackFired&&(!1!==e&&!1!==this._isRefreshingWithFetch||(this._refreshCallbackTimerId&&(this.info("Cancelling pending onRefreshCallback watchdog"),clearTimeout(this._refreshCallbackTimerId),this._refreshCallbackTimerId=void 0),this._refreshCallbackTimerId=setTimeout(function(){return a.doFireOnRefreshCallBack(n)},0))),i&&Object(o.n)(this._updateCallback)&&setTimeout(function(){return a.doFireOnUpdateCallBack(n)},0)}},{key:"getUserId",value:function(){return!1===this._isExposed?"0":this._userId}},{key:"getLinkType",value:function(){return!1===this._isExposed?0:this.getExt().linkType}},{key:"getExt",value:function(){var t=!1===this._isExposed?{}:this._ext;return c({abTestingControlGroup:!this.exposeUserId()},t)}},{key:"isFromCache",value:function(){return this._fromCache}},{key:"exposeUserId",value:function(){return this._isExposed}},{key:"getUserIdAsEid",value:function(){return{source:r.a.ID5_EIDS_SOURCE,uids:[{atype:1,id:this.getUserId(),ext:this.getExt()}]}}},{key:"onAvailable",value:function(t,e){if(!Object(o.n)(t))throw new Error("onAvailable expect a function");var n;return Object(o.n)(this._availableCallback)?this.info("onAvailable was already called, ignoring"):(this._availableCallback=t,(n=this)._userIdAvailable?(this.info("User id already available firing callback immediately"),this._availableCallbackTimerId=setTimeout(function(){return a.doFireOnAvailableCallBack(n)},0)):0<e&&(this._availableCallbackTimerId=setTimeout(function(){return a.doFireOnAvailableCallBack(n)},e))),this}},{key:"onUpdate",value:function(t){if(!Object(o.n)(t))throw new Error("onUpdate expect a function");this._updateCallback=t;var e=this;return this._userIdAvailable&&setTimeout(function(){return a.doFireOnUpdateCallBack(e)},0),this}},{key:"onRefresh",value:function(t,e){if(!Object(o.n)(t))throw new Error("onRefresh expect a function");this._refreshCallbackTimerId&&(clearTimeout(this._refreshCallbackTimerId),this._refreshCallbackTimerId=void 0),this._refreshCallback=t;var n=this;return!0===this._isRefreshing&&!1===this._isRefreshingWithFetch&&this._userIdAvailable?this._refreshCallbackTimerId=setTimeout(function(){return a.doFireOnRefreshCallBack(n)},0):0<e&&(this._refreshCallbackTimerId=setTimeout(function(){return a.doFireOnRefreshCallBack(n)},e)),this}},{key:"localStorageGrant",value:function(){return this.clientStore.localStorageGrant()}},{key:"info",value:function(t){Object(o.u)(this.invocationId,"Id5Status: "+t)}}])&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="1.0.34"},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var d=n(0),e=n(1),i=n.n(e);function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function v(t,e,n){return(e=c(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){t=function(t,e){if("object"!==h(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);e=n.call(t,e||"default");if("object"!==h(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===h(t)?t:String(t)}var s=function(){function c(t,e){o(this,c),this.name=t,this.expiresDays=e}return a(c,[{key:"withNameSuffixed",value:function(){for(var t=this.name,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];t+="_".concat(a)}return new c(t,this.expiresDays)}}]),c}(),u=function t(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;o(this,t);function e(t){var e=void 0!==n?Math.max(1,n):t.expiresDays;return new s(t.name,e)}var r=i.a.STORAGE_CONFIG;this.ID5=e(r.ID5),this.LAST=e(r.LAST),this.CONSENT_DATA=e(r.CONSENT_DATA),this.PD=e(r.PD),this.PRIVACY=e(r.PRIVACY),this.SEGMENTS=e(r.SEGMENTS),this.LIVE_INTENT=e(r.LIVE_INTENT)},l=function(){function f(t,e){if(o(this,f),v(this,"invocationId",void 0),v(this,"options",void 0),v(this,"providedOptions",void 0),v(this,"invalidSegments",void 0),this.invocationId=t,this.options={debugBypassConsent:!1,allowLocalStorageWithoutConsentApi:!1,cmpApi:"iab",consentData:{getConsentData:{consentData:void 0,gdprApplies:void 0},getVendorConsents:{}},refreshInSeconds:7200,partnerId:void 0,partnerUserId:void 0,callbackOnAvailable:void 0,callbackOnUpdates:void 0,callbackTimeoutInMs:void 0,pd:void 0,abTesting:{enabled:!1,controlGroupPct:0},provider:void 0,maxCascades:8,applyCreativeRestrictions:!1,segments:void 0,disableUaHints:!1,disableLiveIntentIntegration:!1,storageExpirationDays:void 0,att:void 0,diagnostics:{publishingDisabled:!1,publishAfterLoadInMsec:3e4,publishBeforeWindowUnload:!0,publishingSampleRatio:.001}},this.providedOptions={},!Object(d.q)(e.partnerId)&&!Object(d.s)(e.partnerId))throw new Error("partnerId is required and must be a number or a string");this.invalidSegments=0,this.updOptions(e),this.storageConfig=new u(e.storageExpirationDays)}return a(f,[{key:"getOptions",value:function(){return this.options}},{key:"getProvidedOptions",value:function(){return this.providedOptions}},{key:"getInvalidSegments",value:function(){return this.invalidSegments}},{key:"updOptions",value:function(c){var s,u=this,l=this;Object(d.r)(c)?(this.setPartnerId(c.partnerId),s=function(t,e){u.options[t]=e,u.providedOptions[t]=e},Object.keys(c).forEach(function(t){var n,e,r,i,o,a;"segments"===t?(a=c[t],n=[],Object(d.j)(a)?(a.forEach(function(t,e){e="segments[".concat(e,"]");return Object(d.j)(t.ids)&&Object(d.b)(t.ids,d.s)?t.ids.length<1?(Object(d.t)(l.invocationId,"Config option ".concat(e,".ids should contain at least one segment ID")),void(l.invalidSegments+=1)):Object(d.s)(t.destination)?void n.push(t):(b(l.invocationId,"".concat(e,".destination"),"String",t.destination),void(l.invalidSegments+=1)):(b(l.invocationId,"".concat(e,".ids"),"Array of String",t.ids),void(l.invalidSegments+=1))}),s(t,n)):b(l.invocationId,t,"Array",a)):"diagnostics"===t?(e=u.options.diagnostics,r=c.diagnostics,Object(d.i)(r,f.configTypes.diagnostics)&&(i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),Object.keys(r).forEach(function(t){void 0!==e[t]&&h(e[t])===h(r[t])&&(i[t]=r[t])}),u.options[t]=i),u.providedOptions[t]=c[t]):"partnerId"!==t&&(o=f.configTypes[t],a=c[t],Object(d.i)(a,o)?s(t,a):b(l.invocationId,t,o,a))})):Object(d.t)(this.invocationId,"Config options must be an object")}},{key:"setPartnerId",value:function(t){var e;if(Object(d.s)(t)){if(e=parseInt(t),isNaN(e)||e<0)throw new Error("partnerId is required and must parse to a positive integer")}else Object(d.q)(t)&&(e=t);if(Object(d.q)(e)){if(Object(d.q)(this.options.partnerId)&&e!==this.options.partnerId)throw new Error("Cannot update config with a different partnerId");this.options.partnerId=e,this.providedOptions.partnerId=t}}}]),f}();function b(t,e,n,r){Object(d.t)(t,"Config option ".concat(e," must be of type ").concat(n," but was ").concat(toString.call(r),". Ignoring..."))}v(l,"configTypes",{debugBypassConsent:"Boolean",allowLocalStorageWithoutConsentApi:"Boolean",cmpApi:"String",consentData:"Object",refreshInSeconds:"Number",partnerUserId:"String",callbackOnAvailable:"Function",callbackOnUpdates:"Function",callbackTimeoutInMs:"Number",pd:"String",abTesting:"Object",provider:"String",maxCascades:"Number",applyCreativeRestrictions:"Boolean",disableUaHints:"Boolean",disableLiveIntentIntegration:"Boolean",storageExpirationDays:"Number",att:"Number",diagnostics:"Object"})},function(t,e,n){"use strict";var a=n(0),c=n(17);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function s(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach(function(t){var e,n;e=r,t=i[n=t],(n=u(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(i,t))})}return r}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function u(t){t=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);e=n.call(t,e||"default");if("object"!==r(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===r(t)?t:String(t)}n=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"gather",value:function(r){var n,i,o={lbCDN:"%%LB_CDN%%"};return c.a.allSettled([(n="https://lb.eu-1-id5-sync.com/lb/v1",i=r,new c.a(function(e){Object(a.a)(n,{success:function(t){t=function(e,n){try{return JSON.parse(n)}catch(t){return Object(a.t)(r,"Cannot parse the JSON  response from: ".concat(e),n),o}}(n,t);e(t)},error:function(t){Object(a.v)(i,"Got error from ".concat(n," endpoint"),t),e(o)}},null)}))]).then(function(t){var e=o;return t.forEach(function(t){t.value&&(e=s(s({},e),t.value))}),e}).catch(function(t){return Object(a.t)(r,"Got error ".concat(t," when gathering extensions data")),o})}}])&&i(e.prototype,n),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}());e.a=n},function(t,i,o){"use strict";!function(t){var e=o(18);var n,r=void 0!==(n=void 0!==t?t:window)&&void 0!==n.Promise?n.Promise:e.a;i.a=r}.call(i,o(4))},function(t,h,p){"use strict";!function(e){var t=p(22),n=p(23),r=setTimeout;function s(t){return Boolean(t&&void 0!==t.length)}function i(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(t,this)}function a(n,r){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,o._immediateFn(function(){var t,e=1===n._state?r.onFulfilled:r.onRejected;if(null!==e){try{t=e(n._value)}catch(t){return void u(r.promise,t)}c(r.promise,t)}else(1===n._state?c:u)(r.promise,n._value)})):n._deferreds.push(r)}function c(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void d((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,l(e)}catch(t){u(e,t)}var r,i}function u(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function f(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function d(t,e){var n=!1;try{t(function(t){n||(n=!0,c(e,t))},function(t){n||(n=!0,u(e,t))})}catch(t){if(n)return;n=!0,u(e,t)}}o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(i);return a(this,new f(t,e,n)),n},o.prototype.finally=t.a,o.all=function(e){return new o(function(i,o){if(!s(e))return o(new TypeError("Promise.all accepts an array"));var a=Array.prototype.slice.call(e);if(0===a.length)return i([]);var c=a.length;for(var t=0;t<a.length;t++)!function e(n,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var r=t.then;if("function"==typeof r)return void r.call(t,function(t){e(n,t)},o)}a[n]=t,0==--c&&i(a)}catch(t){o(t)}}(t,a[t])})},o.allSettled=n.a,o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(n){return new o(function(t,e){e(n)})},o.race=function(i){return new o(function(t,e){if(!s(i))return e(new TypeError("Promise.race accepts an array"));for(var n=0,r=i.length;n<r;n++)o.resolve(i[n]).then(t,e)})},o._immediateFn="function"==typeof e?function(t){e(t)}:function(t){r(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},h.a=o}.call(h,p(19).setImmediate)},function(t,i,o){!function(t){var e=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}i.setTimeout=function(){return new r(n.call(setTimeout,e,arguments),clearTimeout)},i.setInterval=function(){return new r(n.call(setInterval,e,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(e,this._id)},i.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},i.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},i._unrefActive=i.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},o(20),i.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,i.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}.call(i,o(4))},function(t,e,n){!function(t,h){!function(n,r){"use strict";var i,o,a,c,s,u,e,t;function l(t){delete o[t]}function f(t){if(a)setTimeout(f,0,t);else{var e=o[t];if(e){a=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n)}}(e)}finally{l(t),a=!1}}}}function d(){function t(t){t.source===n&&"string"==typeof t.data&&0===t.data.indexOf(e)&&f(+t.data.slice(e.length))}var e="setImmediate$"+Math.random()+"$";n.addEventListener?n.addEventListener("message",t,!1):n.attachEvent("onmessage",t),s=function(t){n.postMessage(e+t,"*")}}n.setImmediate||(i=1,a=!(o={}),c=n.document,t=(t=Object.getPrototypeOf&&Object.getPrototypeOf(n))&&t.setTimeout?t:n,"[object process]"==={}.toString.call(n.process)?s=function(t){h.nextTick(function(){f(t)})}:!function(){if(n.postMessage&&!n.importScripts){var t=!0,e=n.onmessage;return n.onmessage=function(){t=!1},n.postMessage("","*"),n.onmessage=e,t}}()?s=n.MessageChannel?((e=new MessageChannel).port1.onmessage=function(t){f(t.data)},function(t){e.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(u=c.documentElement,function(t){var e=c.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,u.removeChild(e),e=null},u.appendChild(e)}):function(t){setTimeout(f,0,t)}:d(),t.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];return o[i]={callback:t,args:e},s(i),i++},t.clearImmediate=l)}("undefined"==typeof self?void 0===t?this:t:self)}.call(e,n(4),n(21))},function(t,e){var n,r,t=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var c,s=[],u=!1,l=-1;function f(){u&&c&&(u=!1,c.length?s=c.concat(s):l=-1,s.length&&d())}function d(){if(!u){var t=a(f);u=!0;for(var e=s.length;e;){for(c=s,s=[];++l<e;)c&&c[l].run();l=-1,e=s.length}c=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function p(){}t.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new h(t,e)),1!==s.length||u||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=p,t.addListener=p,t.once=p,t.off=p,t.removeListener=p,t.removeAllListeners=p,t.emit=p,t.prependListener=p,t.prependOnceListener=p,t.listeners=function(t){return[]},t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(t,e,n){"use strict";e.a=function(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})}},function(t,e,n){"use strict";e.a=function(n){return new this(function(i,t){if(!n||void 0===n.length)return t(new TypeError(typeof n+" "+n+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var o=Array.prototype.slice.call(n);if(0===o.length)return i([]);var a=o.length;for(var e=0;e<o.length;e++)!function e(n,t){if(t&&("object"==typeof t||"function"==typeof t)){var r=t.then;if("function"==typeof r)return void r.call(t,function(t){e(n,t)},function(t){o[n]={status:"rejected",reason:t},0==--a&&i(o)})}o[n]={status:"fulfilled",value:t},0==--a&&i(o)}(e,o[e])})}},function(t,e,n){"use strict";e.b=function(t,e){if(Math.random()<t&&r.a)return function(t){return new r.b(e).publish(t)};return function(t){return t}},e.d=function(){return new i.c},e.c=p,n.d(e,"a",function(){return v});var r=n(25),a=n(26),i=n(6);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function s(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach(function(t){var e,n;e=r,t=i[n=t],(n=l(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(i,t))})}return r}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function l(t){t=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);e=n.call(t,e||"default");if("object"!==o(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===o(t)?t:String(t)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=h(n);return function(t,e){{if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=h(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){return{partner:t}}var v=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(o,a["a"]);var t,e,n,i=d(o);function o(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,s(s({source:t,version:e},p(n)),r))}return t=o,(e=[{key:"loadDelayTimer",value:function(){return this.timer("id5.api.instance.load.delay",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"fetchCallTimer",value:function(t){return this.timer("id5.api.fetch.call.time",s({status:t},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}},{key:"fetchFailureCallTimer",value:function(){return this.fetchCallTimer("fail",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"fetchSuccessfulCallTimer",value:function(){return this.fetchCallTimer("success",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"extensionsCallTimer",value:function(){return this.timer("id5.api.extensions.call.time",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"consentRequestTimer",value:function(t){return this.timer("id5.api.consent.request.time",s({requestType:t},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}},{key:"invocationCountSummary",value:function(){return this.summary("id5.api.invocation.count",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}}])&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}()},function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);e=n.call(t,e||"default");if("object"!==i(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===i(t)?t:String(t)}(r.key),r)}}n.d(e,"a",function(){return r}),n.d(e,"b",function(){return c});var a="https://diagnostics.id5-sync.com/measurements",r="undefined"!=typeof Promise&&"undefined"!=typeof fetch,c=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t||a}var t,n,r;return t=e,(n=[{key:"publish",value:function(t){return t&&0<t.length?(t.forEach(function(t){var n;n=t.tags,Object.keys(n).forEach(function(t){var e=n[t];e&&(e instanceof Object?n[t]=JSON.stringify(e):n[t]="".concat(e))})}),fetch(this.url,{method:"POST",headers:{"Content-Type":"text/plain"},mode:"no-cors",body:JSON.stringify({measurements:t})})):Promise.resolve()}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(t,e,n){"use strict";n.d(e,"a",function(){return b});var r=n(6),i=n(7);function o(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(t,e,n){return(e=p(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,c=[],s=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,i=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p(r.key),r)}}function h(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function p(t){t=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);e=n.call(t,e||"default");if("object"!==s(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===s(t)?t:String(t)}var v=function(){function t(){f(this,t)}return h(t,[{key:"has",value:function(t){return void 0!==this[t]}},{key:"set",value:function(t,e){return this[t]=e,this}},{key:"get",value:function(t){return this[t]}},{key:"values",value:function(){return Object.entries(this).map(function(t){t=u(t,2),t[0];return t[1]})}}]),t}(),b=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;f(this,e),c(this,"_registry",void 0),c(this,"commonTags",void 0),c(this,"_scheduled",void 0),this._registry=new v,this.commonTags=i.a.from(t)}return h(e,[{key:"getOrCreate",value:function(t,e,n){var r=a(a({},e),this.commonTags),e="".concat(t,"[").concat(i.a.toString(r),"]");return this._registry.has(e)||this._registry.set(e,n(t,r)),this._registry.get(e)}},{key:"getAllMeasurements",value:function(){return this._registry.values().map(function(t){return{name:t.name,type:t.type,tags:t.tags,values:t.values}}).filter(function(t){return t.values&&0<t.values.length})}},{key:"reset",value:function(){Array.from(this._registry.values()).forEach(function(t){return t.reset()})}},{key:"addCommonTags",value:function(t){this.commonTags=a(a({},this.commonTags),i.a.from(t))}},{key:"timer",value:function(t){return this.getOrCreate(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},function(t,e){return new r.d(t,e)})}},{key:"counter",value:function(t){return this.getOrCreate(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},function(t,e){return new r.a(t,e)})}},{key:"summary",value:function(t){return this.getOrCreate(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},function(t,e){return new r.b(t,e)})}},{key:"publish",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(t){return t};return Promise.resolve(this.getAllMeasurements()).then(t).then(function(t){return e.reset()})}},{key:"schedulePublishAfterMsec",value:function(t,e){var n;return this._scheduled||(n=this,setTimeout(function(){return n._scheduled=!1,n.publish(e)},t),this._scheduled=!0),this}},{key:"schedulePublishBeforeUnload",value:function(t){var e=this;return addEventListener("beforeunload",function(){return e.publish(t)}),this}}]),e}()}]);